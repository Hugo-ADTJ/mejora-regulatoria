---
interface Props {
  type?: "WebSite" | "GovernmentOrganization";
  name?: string;
  description?: string;
}

const {
  type = "WebSite",
  name = "Mejora Regulatoria del Ayuntamiento de Tijuana",
  description = "Plataforma oficial de Mejora Regulatoria del Ayuntamiento de Tijuana enfocada en simplificaci칩n administrativa, digitalizaci칩n de tr치mites y fortalecimiento de la calidad normativa.",
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);

/* 游댳 Datos estructurados principales */
const structuredData = {
  "@context": "https://schema.org",
  "@type": type,
  name: name,
  description: description,
  url: canonicalURL.href,
  inLanguage: "es-MX",
  logo: new URL("/image.png", Astro.site).href,

  ...(type === "GovernmentOrganization" && {
    address: {
      "@type": "PostalAddress",
      addressLocality: "Tijuana",
      addressRegion: "Baja California",
      addressCountry: "MX",
    },

    areaServed: {
      "@type": "AdministrativeArea",
      name: "Municipio de Tijuana, Baja California, M칠xico",
    },

    parentOrganization: {
      "@type": "GovernmentOrganization",
      name: "Ayuntamiento de Tijuana",
      url: "https://www.tijuana.gob.mx",
    },

    department: {
      "@type": "GovernmentOrganization",
      name: "Agencia Digital de Tijuana",
      url: "https://agenciadigitaltj.gob.mx",
    },

    contactPoint: {
      "@type": "ContactPoint",
      contactType: "Atenci칩n ciudadana",
      telephone: "+52-664-973-7000",
      email: "contacto@tijuana.gob.mx",
      availableLanguage: "Spanish",
    },
  }),

  ...(type === "WebSite" && {
    potentialAction: {
      "@type": "SearchAction",
      target: {
        "@type": "EntryPoint",
        urlTemplate: `${new URL("/", Astro.site).href}?q={search_term_string}`,
      },
      "query-input": "required name=search_term_string",
    },
  }),
};

/* 游댳 Breadcrumb din치mico */
const breadcrumbSchema = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  itemListElement: [
    {
      "@type": "ListItem",
      position: 1,
      name: "Inicio",
      item: new URL("/", Astro.site).href,
    },
    {
      "@type": "ListItem",
      position: 2,
      name: name,
      item: canonicalURL.href,
    },
  ],
};
---

<script type="application/ld+json" set:html={JSON.stringify(structuredData)} />

<script
  type="application/ld+json"
  set:html={JSON.stringify(breadcrumbSchema)}
/>
